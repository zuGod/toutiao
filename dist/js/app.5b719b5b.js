(function(t){function e(e){for(var s,n,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},i={app:0},o=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-24289a82":"8537c41b"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-24289a82":1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{"chunk-24289a82":"9b12f283"}[t]+".css",i=c.p+s,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===i))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===s||u===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var s=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete n[t],h.parentNode.removeChild(h),a(o)},h.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){n[t]=0})));var s=i[t];if(0!==s)if(s)e.push(s[2]);else{var o=new Promise((function(e,a){s=i[t]=[e,a]}));e.push(s[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(h);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",d.name="ChunkLoadError",d.type=s,d.request=n,a[1](d)}i[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var h=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0b8f":function(t,e,a){},2696:function(t,e,a){"use strict";a("b939")},"2ee4":function(t,e,a){},"365c":function(t,e,a){"use strict";a.d(e,"s",(function(){return l})),a.d(e,"t",(function(){return u})),a.d(e,"q",(function(){return d})),a.d(e,"j",(function(){return h})),a.d(e,"p",(function(){return m})),a.d(e,"l",(function(){return f})),a.d(e,"o",(function(){return v})),a.d(e,"n",(function(){return p})),a.d(e,"k",(function(){return b})),a.d(e,"d",(function(){return g})),a.d(e,"h",(function(){return _})),a.d(e,"a",(function(){return C})),a.d(e,"f",(function(){return y})),a.d(e,"e",(function(){return w})),a.d(e,"i",(function(){return x})),a.d(e,"m",(function(){return k})),a.d(e,"c",(function(){return O})),a.d(e,"g",(function(){return S})),a.d(e,"b",(function(){return j})),a.d(e,"r",(function(){return T})),a.d(e,"u",(function(){return E}));var s=a("bc3a"),n=a("4360"),i=a("d604"),o=a.n(i);const r=s["a"].create({baseURL:"http://toutiao.itheima.net",timeout:2e4,transformResponse:[function(t){try{return o.a.parse(t)}catch(e){return t}}]});r.interceptors.request.use((function(t){const{user:e}=n["a"].state;return e&&e.token&&(t.headers.Authorization="Bearer "+e.token),t}),(function(t){return Promise.reject(t)}));var c=r;const l=({mobile:t,code:e})=>c({url:"/v1_0/authorizations",method:"POST",data:{mobile:t,code:e}}),u=t=>c({url:"/v1_0/sms/codes/"+t,method:"GET"}),d=()=>c({url:"/v1_0/user",method:"GET",headers:{Authorization:"Bearer "+n["a"].state.user.token}}),h=()=>c({url:"/v1_0/channels",method:"GET"}),m=()=>c({url:"/v1_0/user/channels",method:"GET"}),f=t=>c({url:"/v1_0/articles",method:"GET",params:t}),v=t=>c({url:"/v1_0/suggestion",method:"GET",params:{q:t}}),p=t=>c({url:"/v1_0/search",method:"GET",params:t}),b=t=>c({url:"/v1_0/articles/"+t,method:"GET"}),g=t=>c({url:"/v1_0/user/followings",method:"POST",data:{target:t}}),_=t=>c({url:"/v1_0/user/followings/"+t,method:"DELETE"}),C=t=>c({url:"/v1_0/article/collections/"+t,method:"DELETE",data:{target:t}}),y=t=>c({url:"/v1_0/article/collections",method:"POST",data:{target:t}}),w=t=>c({url:"/v1_0/article/likings",method:"POST",data:{target:t}}),x=t=>c({url:"/v1_0/article/likings/"+t,method:"DELETE",data:{target:t}}),k=t=>c({url:"/v1_0/comments",method:"GET",params:t}),O=t=>c({url:"/v1_0/comment/likings",method:"POST",data:{target:t}}),S=t=>c({url:"/v1_0/comment/likings/"+t,method:"DELETE"}),j=t=>c({url:"/v1_0/comments",method:"POST",data:{target:t}}),T=t=>c({url:"/v1_0/user/profile",method:"GET"}),E=t=>c({url:"/v1_0/user/profile",method:"PATCH",data:t})},3887:function(t,e,a){},"421e":function(t,e,a){},4360:function(t,e,a){"use strict";var s=a("2b0e"),n=a("2f62"),i=a("5d2d");s["a"].use(n["a"]);const o="TOUTIAO_USER";e["a"]=new n["a"].Store({state:{user:Object(i["a"])(o)},mutations:{setUser(t,e){t.user=e,Object(i["b"])(o,t.user)}},actions:{},modules:{}})},"56d7":function(t,e,a){"use strict";a.r(e);a("da02");var s=a("6b41"),n=(a("9eda"),a("565f")),i=(a("5a5c"),a("772a")),o=(a("c625"),a("b650")),r=(a("433b"),a("d399")),c=(a("4627"),a("2ed4")),l=(a("1318"),a("ac28")),u=(a("d233"),a("7a82")),d=(a("b342"),a("ad06")),h=(a("bf24"),a("44bf")),m=(a("a035"),a("21ab")),f=(a("4072"),a("2830")),v=(a("2a53"),a("34e9")),p=(a("3ec1"),a("7744")),b=(a("47e2"),a("2241")),g=(a("4071"),a("a3e2")),_=(a("8990"),a("5e46")),C=(a("558f"),a("0b33")),y=(a("93b0"),a("2bdd")),w=(a("4391"),a("58e6")),x=(a("87d0"),a("e41f")),k=(a("1fe9"),a("d961")),O=(a("a247"),a("9ed2")),S=(a("bca0"),a("543e")),j=a("2b0e"),T=function(){var t=this,e=t._self._c;return e("div",[e("router-view")],1)},E=[],$=a("365c"),L={async created(){try{await Object($["j"])()}catch(t){console.log(t)}}},P=L,A=a("2877"),I=Object(A["a"])(P,T,E,!1,null,"51ec2ac1",null),q=I.exports,N=a("8c4f"),z=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"头条 - 登录"}},[e("van-icon",{attrs:{slot:"left",name:"cross"},on:{click:function(e){return t.$router.back()}},slot:"left"})],1),e("div",[e("van-form",{ref:"loginFrom",on:{submit:t.onSubmit}},[e("van-field",{attrs:{required:"",name:"mobile",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号",pattern:/^1[3-9]\d{9}$/}]},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}}),e("van-field",{attrs:{required:"",type:"password",name:"code",label:"密码",placeholder:"密码(246810)",rules:[{required:!0,message:"请填写验证码",pattern:/^\d{6}$/}]},scopedSlots:t._u([t.isCountDownShow?{key:"button",fn:function(){return[e("van-button",{staticClass:"send-sms-btn",attrs:{round:"",size:"small",type:"default","native-type":"button"},on:{click:t.onSendSms}},[e("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(e){t.isCountDownShow=!1}}})],1)]},proxy:!0}:{key:"button",fn:function(){return[e("van-button",{staticClass:"send-sms-btn",attrs:{round:"",size:"small",type:"default","native-type":"button"},on:{click:t.onSendSms}},[t._v("发送验证码")])]},proxy:!0}],null,!0),model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1)],1)],1)},D=[],U={name:"login",data(){return{user:{mobile:"",code:""},isCountDownShow:!1}},methods:{async onSubmit(){this.$toast.loading({message:"登录中...",forbidClick:!0,duration:0});try{const{data:t}=await Object($["s"])(this.user);this.$store.commit("setUser",t.data),this.$toast.success("登录成功"),this.$router.back()}catch(t){console.log(t),this.$toast.fail("登录失败")}},async onSendSms(){try{await this.$refs.loginFrom.validate("mobile"),this.$toast.success("验证成功")}catch(t){}this.isCountDownShow=!0;try{await Object($["t"])(this.user.mobile),this.$toast.success("发送成功")}catch(t){404===t.response.status?this.$toast.fail("手机号码不正确"):this.$toast.fail("信息错误")}}}},R=U,G=(a("cc8c"),Object(A["a"])(R,z,D,!1,null,"1437008b",null)),M=G.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-container"},[e("router-view"),e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{attrs:{icon:"home-o",to:"/home"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{icon:"search",to:"/qa"}},[t._v("问答")]),e("van-tabbar-item",{attrs:{to:"/vide"}},[e("i",{staticClass:"iconfont icon-shipin",attrs:{slot:"icon"},slot:"icon"}),t._v(" 视频")]),e("van-tabbar-item",{attrs:{icon:"setting-o",to:"/my"}},[t._v(t._s(t.$store.state.user?"我的":"未登录"))])],1)],1)},F=[],H={name:"LayoutIndex",data(){return{}}},J=H,K=Object(A["a"])(J,B,F,!1,null,"a4f1e8d8",null),W=K.exports,Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-container"},[e("van-nav-bar",{attrs:{fixed:""}},[e("van-button",{staticClass:"search-btn",attrs:{slot:"title",type:"info",size:"small",round:"",icon:"search",to:"/search"},slot:"title"},[t._v("搜索")])],1),e("van-tabs",{staticClass:"channel-tabs",attrs:{animated:"",swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.channels,(function(t){return e("van-tab",{key:t.id,attrs:{title:t.name}},[e("ArticleList",{attrs:{channel:t}})],1)})),e("div",{staticClass:"placeholder",attrs:{slot:"nav-right"},slot:"nav-right"}),e("div",{staticClass:"hamburger-btn",attrs:{slot:"nav-right"},on:{click:function(e){t.isChannelEditShow=!0}},slot:"nav-right"},[e("i",{staticClass:"iconfont icon-gengduo"})])],2),e("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.isChannelEditShow,callback:function(e){t.isChannelEditShow=e},expression:"isChannelEditShow"}},[e("ChannelEdit",{attrs:{"my-channels":t.channels,active:t.active},on:{"update-active":t.unUpdateActive}})],1)],1)},V=[],X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-list"},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{load:t.onLoad,"update:error":function(e){t.error=e}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,a){return e("ArticleItem",{key:a,attrs:{article:t}})})),1)],1)],1)},Y=[],Z=(a("3c65"),a("14d9"),function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"article-item",attrs:{to:"/article/"+t.article.art_id}},[e("div",{staticClass:"title van-multi-ellipsis--l2",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.article.title)+" ")]),e("div",{attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?e("div",{staticClass:"cover-wrap"},t._l(t.article.cover.images,(function(t,a){return e("div",{key:a,staticClass:"cover-item"},[e("van-image",{staticClass:"cover-item-img",attrs:{src:t,fit:"cover"}})],1)})),0):t._e(),e("div",{staticClass:"label-info-warp"},[e("span",[t._v(t._s(t.article.aut_name))]),e("span",[t._v(t._s(t.article.comm_count)+"评论")]),e("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),1===t.article.cover.type?e("van-image",{staticClass:"right-cover",attrs:{slot:"default",fit:"cover",src:t.article.cover.images[0]},slot:"default"}):t._e()],1)}),tt=[],et={props:{article:{type:Object,required:!0}}},at=et,st=(a("dcb6"),Object(A["a"])(at,Z,tt,!1,null,"5492d1d0",null)),nt=st.exports,it={components:{ArticleItem:nt},props:{channel:{type:Object,required:!0}},data(){return{list:[],loading:!1,finished:!1,timestamp:null,error:!1,isLoading:!1}},methods:{async onRefresh(){try{const{data:t}=await Object($["l"])({channel_id:this.channel.id,timestamp:this.timestamp||Date.now()});this.list.unshift(...t.data.results),this.isLoading=!1}catch(t){this.$toast("获取列表数据失败")}},async onLoad(){try{const{data:t}=await Object($["l"])({channel_id:this.channel.id,timestamp:this.timestamp||Date.now()});this.list.push(...t.data.results),this.loading=!1,t.data.results.length?this.timestamp=t.data.pre_timestamp:this.finished=!0}catch(t){this.error=!0,this.loading=!1}}}},ot=it,rt=(a("2696"),Object(A["a"])(ot,X,Y,!1,null,"10742c9a",null)),ct=rt.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"channel-edit"},[e("van-cell",{attrs:{border:!1}},[e("div",{staticClass:"title-text",attrs:{slot:"title"},slot:"title"},[t._v("我的频道")]),e("van-button",{staticClass:"edit-btn",attrs:{type:"danger",plain:"",round:"",size:"mini"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"完成":"编辑"))])],1),e("van-grid",{staticClass:"my-item",attrs:{gutter:10}},t._l(t.myChannels,(function(a,s){return e("van-grid-item",{key:s,staticClass:"grid-item",on:{click:function(e){return t.onMyChannelClick(a,s)}}},[e("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isEdit&&!t.fiexChannels.includes(a.id),expression:"isEdit && !fiexChannels.includes(channel.id)"}],attrs:{slot:"icon",name:"clear"},slot:"icon"}),e("span",{staticClass:"text",class:{active:s===t.active},attrs:{slot:"text"},slot:"text"},[t._v(t._s(a.name))])],1)})),1),e("van-cell",{attrs:{border:!1}},[e("div",{staticClass:"title-text",attrs:{slot:"title"},slot:"title"},[t._v("频道推荐")])]),e("van-grid",{staticClass:"recommend-grid",attrs:{gutter:10}},t._l(t.recommendChannels,(function(a,s){return e("van-grid-item",{key:s,staticClass:"grid-item",attrs:{icon:"plus",text:a.name},on:{click:function(e){return t.onAddChannel(a)}}})})),1)],1)},ut=[],dt=a("2f62"),ht=a("5d2d"),mt={props:{myChannels:{type:Array,required:!0},active:{type:Number,required:!0}},data(){return{allChannels:[],isEdit:!1,fiexChannels:[0]}},computed:{...Object(dt["b"])(["user"]),recommendChannels(){return this.allChannels.filter(t=>!this.myChannels.find(e=>e.id===t.id))}},methods:{async loadAllChannels(){try{const{data:t}=await Object($["j"])();this.allChannels=t.data.channels}catch(t){this.$toast("数据获取失败")}},onAddChannel(t){this.myChannels.push(t),this.user||Object(ht["b"])("TOUTIAO_CHANNELS",this.myChannels)},onMyChannelClick(t,e){this.isEdit?(e<=this.active&&this.$emit("update-active",this.active-1,!0),this.myChannels.splice(e,1)):this.$emit("update-active",e)}},created(){this.loadAllChannels()}},ft=mt,vt=(a("a389"),Object(A["a"])(ft,lt,ut,!1,null,"55cc3408",null)),pt=vt.exports,bt={name:"home",components:{ArticleList:ct,ChannelEdit:pt},data(){return{channels:[],isChannelEditShow:!1,active:0}},created(){this.loadChannels()},methods:{async loadChannels(){try{const{data:t}=await Object($["p"])();this.channels=t.data.channels}catch(t){this.$toast("获取频道数据失败")}},unUpdateActive(t,e=!0){this.active=t,this.isChannelEditShow=e}}},gt=bt,_t=(a("b2e3"),Object(A["a"])(gt,Q,V,!1,null,"16963521",null)),Ct=_t.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-container"},[t._v("开发中。。。")])},wt=[],xt={name:"qa"},kt=xt,Ot=Object(A["a"])(kt,yt,wt,!1,null,"3778c5b8",null),St=Ot.exports,jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-container"},[t._v("开发中。。。")])},Tt=[],Et={name:"vide"},$t=Et,Lt=Object(A["a"])($t,jt,Tt,!1,null,"d1f1757e",null),Pt=Lt.exports,At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-container"},[t.user?e("div",{staticClass:"header user-info"},[e("div",{staticClass:"base-info"},[e("div",{staticClass:"left"},[e("van-image",{staticClass:"avatar",attrs:{round:"",fit:"cover",src:t.userInfo.photo}}),e("span",{staticClass:"name"},[t._v(t._s(t.userInfo.name))])],1),e("div",{staticClass:"right"},[e("van-button",{attrs:{size:"mini",round:"",to:"/user/profile"}},[t._v("编辑资料")])],1)]),e("div",{staticClass:"data-stats"},[e("div",{staticClass:"data-item"},[e("span",{staticClass:"count"},[t._v(t._s(t.userInfo.art_count))]),e("span",{staticClass:"text"},[t._v("头条")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"count"},[t._v(t._s(t.userInfo.follow_count))]),e("span",{staticClass:"text"},[t._v("关注")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"count"},[t._v(t._s(t.userInfo.fans_count))]),e("span",{staticClass:"text"},[t._v("粉丝")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"count"},[t._v(t._s(t.userInfo.like_count))]),e("span",{staticClass:"text"},[t._v("获赞")])])])]):e("div",{staticClass:"header not-login"},[e("div",{staticClass:"login-btn",on:{click:function(e){return t.$router.push("/login")}}},[e("img",{attrs:{src:a("c2e4"),alt:""}}),e("span",{staticClass:"text"},[t._v("登录 / 注册")])])]),e("div",[e("van-grid",{staticClass:"grid-nav",attrs:{"column-num":"2",clickable:""}},[e("van-grid-item",{staticClass:"grid-item"},[e("i",{staticClass:"iconfont icon-shoucang",attrs:{slot:"icon"},slot:"icon"}),e("span",{staticClass:"text",attrs:{slot:"text"},slot:"text"},[t._v("收藏")])]),e("van-grid-item",{staticClass:"grid-item"},[e("i",{staticClass:"iconfont icon-guanzhu1",attrs:{slot:"icon"},slot:"icon"}),e("span",{staticClass:"text",attrs:{slot:"text"},slot:"text"},[t._v("关注")])])],1)],1),e("van-cell",{attrs:{title:"消息通知","is-link":""}}),e("van-cell",{attrs:{title:"小智同学","is-link":""}}),t.user?e("van-cell",{staticClass:"logout-cell",attrs:{title:"退出登录",clickable:""},on:{click:function(e){return t.onLogout()}}}):t._e()],1)},It=[],qt={name:"my",data(){return{userInfo:{}}},computed:{...Object(dt["b"])(["user"])},methods:{onLogout(){this.$dialog.confirm({title:"确认退出么？",message:""}).then(()=>{this.$store.commit("setUser",null)}).catch(()=>{})},async loadUserInfo(){try{const{data:t}=await Object($["q"])();this.userInfo=t.data}catch(t){this.$toast("获取数据失败")}}},created(){this.user&&this.loadUserInfo()}},Nt=qt,zt=(a("9128"),Object(A["a"])(Nt,At,It,!1,null,"3a945fa9",null)),Dt=zt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-container"},[e("form",{staticClass:"search-form",attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",background:"#3296fa"},on:{search:t.onSearch,cancel:t.onCancel,focus:function(e){t.isResultShow=!1}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),t.isResultShow?e("SearchResult",{attrs:{searchText:t.searchText}}):t.searchText?e("SearchSuggestion",{attrs:{searchText:t.searchText},on:{search:t.onSearch}}):e("SearchHistory")],1)},Rt=[],Gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"}},[e("span",[t._v("全部删除")]),e("span",[t._v("完成")]),e("van-icon",{attrs:{name:"delete-o"}})],1),e("van-cell",{attrs:{title:"hello"}},[e("van-icon",{attrs:{name:"close"}})],1),e("van-cell",{attrs:{title:"hello"}},[e("van-icon",{attrs:{name:"close"}})],1),e("van-cell",{attrs:{title:"hello"}},[e("van-icon",{attrs:{name:"close"}})],1),e("van-cell",{attrs:{title:"hello"}},[e("van-icon",{attrs:{name:"close"}})],1)],1)},Mt=[],Bt={},Ft=Bt,Ht=Object(A["a"])(Ft,Gt,Mt,!1,null,"281defb0",null),Jt=Ht.exports,Kt=function(){var t=this,e=t._self._c;return e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"加载失败,点击重试"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,a){return e("van-cell",{key:a,attrs:{title:t.title}})})),1)],1)},Wt=[],Qt={props:{searchText:{type:String,required:!0}},data(){return{list:[],loading:!1,finished:!1,page:1,perPage:20,error:!1}},methods:{async onLoad(){try{const{data:t}=await Object($["n"])({page:this.page,per_page:this.perPage,q:this.searchText});console.log(t),this.list.push(...t.data.results),this.loading=!1,t.data.results.length?this.page++:this.finished=!0}catch(t){this.error=!0,this.loading=!1,this.$toast("数据加载失败")}}}},Vt=Qt,Xt=Object(A["a"])(Vt,Kt,Wt,!1,null,"1216371e",null),Yt=Xt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-suggestion"},t._l(t.suggestions,(function(a,s){return e("van-cell",{key:s,attrs:{title:a,icon:"search"},on:{click:function(e){return t.$emit("search",a)}}})})),1)},te=[],ee=a("2ef0"),ae={props:{searchText:{type:String,required:!0}},data(){return{suggestions:[]}},watch:{searchText:{handler:Object(ee["debounce"])((function(t){this.loadSearchSuggestions(t)}),200),immediate:!0}},methods:{async loadSearchSuggestions(t){try{const{data:t}=await Object($["o"])(this.searchText);this.suggestions=t.data.options}catch(e){this.$toast("获取数据失败")}}}},se=ae,ne=Object(A["a"])(se,Zt,te,!1,null,"7286fc0d",null),ie=ne.exports,oe={data(){return{searchText:"",isResultShow:!1}},components:{SearchHistory:Jt,SearchResult:Yt,SearchSuggestion:ie},methods:{onSearch(t){this.searchText=t,this.isResultShow=!0},onCancel(){this.$router.back()}}},re=oe,ce=(a("a2c8"),Object(A["a"])(re,Ut,Rt,!1,null,"89128622",null)),le=ce.exports,ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-container"},[e("van-nav-bar",{staticClass:"page-nav-bar",attrs:{"left-arrow":"",title:"黑马头条"}}),e("div",{staticClass:"main-wrap"},[t.loading?e("div",{staticClass:"loading-wrap"},[e("van-loading",{attrs:{color:"#3296fa",vertical:""}},[t._v("加载中")])],1):t.article.title?e("div",{ref:"article-content",staticClass:"article-detail"},[e("h1",{staticClass:"article-title"},[t._v(t._s(t.article.title))]),e("van-cell",{staticClass:"user-info",attrs:{center:"",border:!1}},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.article.aut_photo},slot:"icon"}),e("div",{staticClass:"user-name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.aut_name))]),e("div",{staticClass:"publish-date",attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("relativeTime")(t.article.pubdate))+" ")]),t.article.is_followed?e("van-button",{staticClass:"follow-btn",attrs:{round:"",size:"small",loading:t.followLoading},on:{click:t.onFollow}},[t._v("已关注")]):e("van-button",{staticClass:"follow-btn",attrs:{loading:t.followLoading,type:"info",color:"#3296fa",round:"",size:"small",icon:"plus"},on:{click:t.onFollow}},[t._v("关注")])],1),e("div",{staticClass:"article-content markdown-body",domProps:{innerHTML:t._s(t.article.content)}}),e("van-divider",[t._v("正文结束")]),e("CommentList",{attrs:{source:t.article.art_id,list:t.commentList},on:{"onload-success":function(e){t.totalCommentCount=e.total_count}}}),e("div",{staticClass:"article-bottom"},[e("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.isPostShow=!0}}},[t._v("写评论")]),e("van-icon",{attrs:{name:"comment-o",info:t.totalCommentCount,color:"#777"}}),e("CollectArticle",{staticClass:"btn-item",attrs:{"article-id":t.article.art_id},model:{value:t.article.is_collected,callback:function(e){t.$set(t.article,"is_collected",e)},expression:"article.is_collected"}}),e("Like-article",{staticClass:"btn-item",attrs:{"article-id":t.article.art_id},model:{value:t.article.attitude,callback:function(e){t.$set(t.article,"attitude",e)},expression:"article.attitude"}}),e("van-icon",{attrs:{name:"share",color:"#777777"}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.isPostShow,callback:function(e){t.isPostShow=e},expression:"isPostShow"}},[e("CommentPost",{attrs:{target:t.article.art_id},on:{"post-success":t.onPostSuccess}})],1)],1):404===t.errStatus?e("div",{staticClass:"error-wrap"},[e("van-icon",{attrs:{name:"failure"}}),e("p",{staticClass:"text"},[t._v("该资源不存在或已删除！")])],1):e("div",{staticClass:"error-wrap"},[e("van-icon",{attrs:{name:"failure"}}),e("p",{staticClass:"text"},[t._v("内容加载失败！")]),e("van-button",{staticClass:"retry-btn",on:{click:t.loadArticle}},[t._v("点击重试")])],1)])],1)},de=[],he=(a("cea6"),a("28a2")),me=function(){var t=this,e=t._self._c;return e("div",{staticClass:"collect-article"},[e("van-button",{class:{collected:t.value},attrs:{icon:t.value?"star":"star-o",loading:t.loading},on:{click:t.onCollect}})],1)},fe=[],ve={props:{value:{type:Boolean,required:!0},articleId:{type:[Number,String,Object],required:!0}},data(){return{loading:!1}},methods:{async onCollect(){this.loading=!0;try{this.value?await Object($["f"])(this.articleId):await Object($["a"])(this.articleId),this.$emit("input",!this.value),this.$toast.success(this.value?"取消收藏":"收藏成功")}catch(t){this.$toast("失败")}this.loading=!1}}},pe=ve,be=(a("6a31"),Object(A["a"])(pe,me,fe,!1,null,"d50b0d28",null)),ge=be.exports,_e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"collect-article"},[e("van-button",{class:{liked:1===t.value},attrs:{icon:1===t.value?"good-job":"good-job-o",loading:t.loading},on:{click:t.onCollect}})],1)},Ce=[],ye={props:{value:{type:Number,required:!0},articleId:{type:[Number,String,Object],required:!0}},data(){return{loading:!1}},methods:{async onCollect(){this.loading=!0;try{let t=-1;1===this.value?await Object($["i"])(this.articleId):(await Object($["e"])(this.articleId),t=1),this.$emit("input",t),this.$toast.success(1===t?"点赞成功":"取消点赞")}catch(t){this.$toast("失败")}this.loading=!1}}},we=ye,xe=(a("7dc9"),Object(A["a"])(we,_e,Ce,!1,null,"360059c4",null)),ke=xe.exports,Oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-list"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,a){return e("comment-item",{key:a,attrs:{title:t.content,comment:t}})})),1)],1)},Se=[],je=function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.comment.aut_photo},slot:"icon"}),e("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"user-name"},[t._v(t._s(t.comment.aut_name))]),e("van-button",{staticClass:"like-btn",class:{liked:t.comment.is_liking},attrs:{icon:t.comment.is_liking?"good-job":"good-job-o",loading:t.loading},on:{click:function(e){return t.onCommentLike()}}},[t._v(" "+t._s(t.comment.like_count>0?t.comment.like_count:"赞"))])],1),e("div",{attrs:{slot:"label"},slot:"label"},[e("p",{staticClass:"comment-content"},[t._v(t._s(t.comment.content))]),e("div",{staticClass:"bottom-info"},[e("span",{staticClass:"comment-pubdate"},[t._v(t._s(t._f("relativeTime")(t.comment.pubdate)))]),e("van-button",{staticClass:"reply-btn",attrs:{round:""}},[t._v(t._s(t.comment.reply_count))])],1)])],1)},Te=[],Ee={name:"CommentItem",components:{},props:{comment:{type:Object,required:!0}},data(){return{loading:!1}},computed:{},watch:{},created(){},methods:{async onCommentLike(){this.loading=!0;try{this.comment.is_liking?(await Object($["g"])(this.comment.com_id),this.comment.like_count--):(await Object($["c"])(this.comment.com_id),this.comment.like_count++),this.comment.is_liking=!this.comment.is_liking}catch(t){this.$toast("操作失败")}this.loading=!1}}},$e=Ee,Le=(a("5bad"),Object(A["a"])($e,je,Te,!1,null,"825329c0",null)),Pe=Le.exports,Ae={components:{CommentItem:Pe},props:{source:{type:[Number,String,Object],require:!0},list:{type:Array,default:function(){return[]}}},data(){return{loading:!1,finished:!1,offset:null,limit:10}},created(){this.onLoad()},methods:{async onLoad(){try{const{data:t}=await Object($["m"])({type:"a",source:this.source,offset:this.offset,limit:this.limit}),{results:e,total_count:a}=t.data;this.list.push(...e),this.$emit("onload-success",t.data),this.loading=!1,e.length?this.offset=t.data.last_id:this.finished=!0}catch(t){}}}},Ie=Ae,qe=Object(A["a"])(Ie,Oe,Se,!1,null,"2947e27c",null),Ne=qe.exports,ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-post"},[e("van-field",{staticClass:"post-field",attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),e("van-button",{staticClass:"post-btn",on:{click:function(e){return t.onPost()}}},[t._v("发布")])],1)},De=[],Ue={name:"CommentPost",components:{},props:{target:{type:[Number,String,Object],required:!0}},data(){return{message:""}},computed:{},watch:{},created(){},mounted(){},methods:{async onPost(){try{const{data:t}=await Object($["b"])({target:this.target,content:this.message,art_id:null});this.$emit("post-success",t.data),this.message=""}catch(t){this.$toast.fail("发布失败")}}}},Re=Ue,Ge=(a("804e"),Object(A["a"])(Re,ze,De,!1,null,"5a4ec5ce",null)),Me=Ge.exports,Be=(a("945f"),{name:"ArticleIndex",components:{CollectArticle:ge,LikeArticle:ke,CommentList:Ne,CommentPost:Me},props:{articleId:{type:[Number,String,Object],required:!0}},data(){return{article:{},loading:!0,errStatus:0,followLoading:!1,totalCommentCount:0,isPostShow:!1,commentList:[]}},computed:{},watch:{},created(){this.loadArticle()},mounted(){},methods:{async loadArticle(){try{this.loading=!0;const{data:t}=await Object($["k"])(this.articleId);this.article=t.data,this.loading=!1,setTimeout(()=>{this.previewImage()},0)}catch(t){t.response&&404===t.response.status&&(this.errStatus=404),this.loading=!1,this.toast("获取数据失败")}},previewImage(){const t=this.$refs["article-content"],e=t.querySelectorAll("img"),a=[];e.forEach((t,e)=>{a.push(t.src),t.onclick=()=>{Object(he["a"])({images:a,startPosition:e})}})},async onFollow(){try{this.article.is_followed?await Object($["h"])(this.article.aut_id):await Object($["d"])(this.article.aut_id),this.article.is_followed=!this.article.is_followed}catch(t){let e="操作失败";t.response&&400===t.response.status&&(e="你不能关注你自己！"),this.$toast(e)}this.followLoading=!1},onPostSuccess(){this.isPostShow=!1,this.commentList.unshift(data.new_obj)}}}),Fe=Be,He=(a("acd7"),Object(A["a"])(Fe,ue,de,!1,null,"3e1c49b2",null)),Je=He.exports;j["a"].use(N["a"]);const Ke=[{path:"/login",component:M},{path:"/",component:W,redirect:"/home",children:[{path:"/home",name:"home",component:Ct},{path:"/qa",name:"qa",component:St},{path:"/vide",name:"vide",component:Pt},{path:"/my",name:"my",component:Dt}]},{path:"/search",component:le},{path:"/article/:articleId",component:Je,props:!0},{name:"user-profile",path:"/user/profile",component:()=>a.e("chunk-24289a82").then(a.bind(null,"524b"))}],We=new N["a"]({routes:Ke});var Qe=We,Ve=a("4360"),Xe=(a("a4b1"),a("5cfb"),a("5a0c")),Ye=a.n(Xe),Ze=(a("a471"),a("4208")),ta=a.n(Ze);Ye.a.extend(ta.a),Ye.a.locale("zh-cn"),j["a"].filter("relativeTime",t=>Ye()().to(Ye()(t))),j["a"].use(S["a"]),j["a"].use(O["a"]),j["a"].use(k["a"]),j["a"].use(x["a"]),j["a"].use(w["a"]),j["a"].use(y["a"]),j["a"].use(C["a"]),j["a"].use(_["a"]),j["a"].use(g["a"]),j["a"].use(b["a"]),j["a"].use(p["a"]),j["a"].use(v["a"]),j["a"].use(f["a"]),j["a"].use(m["a"]),j["a"].use(h["a"]),j["a"].use(d["a"]),j["a"].use(u["a"]),j["a"].use(l["a"]),j["a"].use(c["a"]),j["a"].use(r["a"]),j["a"].use(o["a"]),j["a"].use(i["a"]),j["a"].use(n["a"]),j["a"].use(s["a"]),j["a"].prototype.formatWord=function(t){return t.replace(/\n/g,"<br>")},j["a"].config.productionTip=!1,new j["a"]({router:Qe,store:Ve["a"],render:t=>t(q)}).$mount("#app")},"5bad":function(t,e,a){"use strict";a("3887")},"5d2d":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return n}));const s=(t,e)=>{"object"===typeof e&&(e=JSON.stringify(e)),window.localStorage.setItem(t,e)},n=t=>{const e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(a){return e}}},"6a31":function(t,e,a){"use strict";a("f01d")},"7dc9":function(t,e,a){"use strict";a("0b8f")},"804e":function(t,e,a){"use strict";a("2ee4")},"864a":function(t,e,a){},9128:function(t,e,a){"use strict";a("421e")},"945f":function(t,e,a){},a2c8:function(t,e,a){"use strict";a("c378")},a389:function(t,e,a){"use strict";a("ade0")},a4b1:function(t,e,a){},acd7:function(t,e,a){"use strict";a("f8f5")},ade0:function(t,e,a){},b2e3:function(t,e,a){"use strict";a("f6a6")},b939:function(t,e,a){},c2e4:function(t,e,a){t.exports=a.p+"img/3.dd9ecf7e.png"},c378:function(t,e,a){},cc8c:function(t,e,a){"use strict";a("864a")},dcb6:function(t,e,a){"use strict";a("fb27")},f01d:function(t,e,a){},f6a6:function(t,e,a){},f8f5:function(t,e,a){},fb27:function(t,e,a){}});
//# sourceMappingURL=app.5b719b5b.js.map